<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>XanaHealth - Appointments</title>
    <style>
      * { margin: 0; padding: 0; box-sizing: border-box; }
      body { font-family: 'Inter', sans-serif; background-color: #f5f5f5; color: #333; }

      /* ── Layout ── */
      .container { display: flex; min-height: 100vh; }

      /* ── Sidebar ── */
      .sidebar { width: 240px; background-color: #fff; border-right: 1px solid #e5e5e5; display: flex; flex-direction: column; flex-shrink: 0; }
      .logo { padding: 20px 24px; font-size: 20px; font-weight: 600; }
      .logo span:first-child { color: #333; }
      .logo span:last-child { color: #059669; }
      .nav-section { padding: 12px 0; }
      .nav-label { padding: 8px 24px; font-size: 11px; font-weight: 600; color: #9ca3af; text-transform: uppercase; letter-spacing: 0.5px; }
      .nav-item { display: flex; align-items: center; padding: 10px 24px; color: #6b7280; text-decoration: none; font-size: 14px; cursor: pointer; transition: background-color 0.2s; }
      .nav-item.active { color: #059669; border-right: 3px solid #059669; }
      .nav-item svg { width: 18px; height: 18px; margin-right: 12px; opacity: 0.6; }
      .user-section { margin-top: auto; padding: 20px 24px; border-top: 1px solid #e5e5e5; }
      .user-profile { display: flex; align-items: center; margin-bottom: 16px; }
      .user-avatar { width: 40px; height: 40px; border-radius: 50%; background-color: #fecaca; margin-right: 12px; }
      .user-info h4 { font-size: 14px; font-weight: 600; color: #333; }
      .user-info p { font-size: 12px; color: #9ca3af; }
      .user-actions { display: flex; flex-direction: column; gap: 8px; }
      .user-action { display: flex; align-items: center; padding: 8px 0; color: #6b7280; text-decoration: none; font-size: 14px; cursor: pointer; }
      .user-action svg { width: 18px; height: 18px; margin-right: 12px; opacity: 0.6; }

      /* ── Main ── */
      .main-content { flex: 1; display: flex; flex-direction: column; overflow: hidden; }
      .header { background-color: #fff; padding: 16px 32px; border-bottom: 1px solid #e5e5e5; display: flex; justify-content: space-between; align-items: center; }
      .header h1 { font-size: 24px; font-weight: 600; color: #111827; }
      .header-right { display: flex; align-items: center; gap: 20px; }
      .notification-icon { width: 20px; height: 20px; cursor: pointer; }
      .company-dropdown { display: flex; align-items: center; gap: 8px; padding: 8px 16px; background-color: #fff; border: 1px solid #e5e5e5; border-radius: 6px; cursor: pointer; color: #9ca3af; }

      /* ── Views ── */
      .view { display: none; flex: 1; flex-direction: column; overflow-y: auto; }
      .view.active { display: flex; }

      /* ── Content Area (list view) ── */
      .content-area { padding: 24px 32px; flex: 1; background-color: #f9fafb; }
      .controls { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; gap: 16px; }
      .controls-left { display: flex; gap: 12px; flex: 1; }
      .filter-btn, .action-btn { display: flex; align-items: center; gap: 8px; padding: 10px 16px; background-color: #fff; border: 1px solid #d1d5db; border-radius: 6px; cursor: pointer; font-size: 14px; color: #374151; }
      .search-box { display: flex; align-items: center; gap: 8px; padding: 10px 16px; background-color: #fff; border: 1px solid #d1d5db; border-radius: 6px; flex: 1; max-width: 300px; }
      .search-box input { border: none; outline: none; flex: 1; font-size: 14px; color: #6b7280; }
      .controls-right { display: flex; gap: 12px; }
      .export-btn { padding: 10px 20px; background-color: #fff; border: 1px solid #d1d5db; border-radius: 6px; cursor: pointer; font-size: 14px; color: #374151; font-weight: 500; }
      .add-patient-btn { display: flex; align-items: center; gap: 8px; padding: 10px 20px; background-color: #4a8f75; border: none; border-radius: 6px; cursor: pointer; font-size: 14px; color: #fff; font-weight: 500; }
      .add-patient-btn:hover { background-color: #3a7560; }

      .applied-filters { display: flex; gap: 8px; margin-bottom: 16px; align-items: center; flex-wrap: wrap; }
      .filter-label { font-size: 13px; color: #6b7280; }
      .filter-tag { display: flex; align-items: center; gap: 6px; padding: 6px 12px; background-color: #f3f4f6; border-radius: 4px; font-size: 13px; color: #374151; }
      .filter-tag .close { cursor: pointer; opacity: 0.6; }
      .clear-filter { color: #ef4444; font-size: 13px; cursor: pointer; font-weight: 500; }

      /* ── Table ── */
      .table-container { background-color: #fff; border-radius: 8px; overflow: hidden; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
      table { width: 100%; border-collapse: collapse; }
      thead { background-color: #dfe5e5; border-bottom: 1px solid #e5e5e5; }
      th { padding: 12px 16px; text-align: left; font-size: 12px; font-weight: 600; color: #6b7280; text-transform: uppercase; letter-spacing: 0.5px; }
      td { padding: 14px 16px; border-bottom: 1px solid #f3f4f6; font-size: 14px; color: #374151; }
      tbody tr:hover { background-color: #f9fafb; }
      .checkbox { width: 16px; height: 16px; cursor: pointer; }
      .patient-image { width: 36px; height: 36px; border-radius: 50%; object-fit: cover; }
      .action-icons { display: flex; gap: 12px; }
      .action-icon { width: 18px; height: 18px; opacity: 0.5; cursor: pointer; }
      .action-icon:hover { opacity: 1; }
      .pagination { display: flex; justify-content: flex-end; align-items: center; padding: 16px 24px; gap: 8px; }
      .page-btn { padding: 8px 12px; border: 1px solid #d1d5db; background-color: #fff; border-radius: 4px; cursor: pointer; font-size: 14px; color: #374151; }
      .page-btn.active { background-color: #4a8f75; color: #fff; border-color: #4a8f75; }
      .page-btn:disabled { opacity: 0.4; cursor: not-allowed; }
      .page-info { font-size: 14px; color: #9ca3af; margin-left: 8px; }

      /* ── Calendar ── */
      .calendar-header { display: flex; align-items: center; gap: 20px; margin-top: 32px; margin-bottom: 8px; }
      .nav-button { padding: 10px 20px; border: 1px solid #e5e7eb; background: white; border-radius: 6px; cursor: pointer; color: #6b7280; font-size: 14px; transition: all 0.2s; }
      .nav-button:hover { background: #f9fafb; border-color: #d1d5db; }
      .current-month { font-size: 24px; font-weight: 700; color: #111827; }
      .calendar-container { background: white; border-radius: 12px; padding: 24px; margin-top: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
      .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); border: 1px solid #e5e7eb; border-radius: 8px; overflow: hidden; }
      .day-header { background: #f9fafb; padding: 16px; font-weight: 600; font-size: 14px; color: #111827; border-right: 1px solid #e5e7eb; border-bottom: 1px solid #e5e7eb; text-align: left; }
      .day-header:last-child { border-right: none; }
      .calendar-day { min-height: 120px; padding: 12px; border-right: 1px solid #e5e7eb; border-bottom: 1px solid #e5e7eb; background: white; position: relative; cursor: pointer; }
      .calendar-day:nth-child(7n) { border-right: none; }
      .calendar-day.other-month { background: #fafafa; }
      .calendar-day.selected { background: #fef3e2; }
      .calendar-day:hover:not(.other-month) { background: #f0fdf4; }
      .day-date { font-size: 13px; color: #6b7280; margin-bottom: 8px; }
      .day-events { display: flex; flex-direction: column; gap: 4px; }
      .event { font-size: 12px; color: #3b82f6; line-height: 1.4; }

      /* ── New Appointment Form ── */
      .form-view-area { padding: 32px; background-color: #f4f6f5; flex: 1; display: flex; flex-direction: column; align-items: center; }
      .back-btn { display: inline-flex; align-items: center; gap: 6px; background: none; border: none; cursor: pointer; font-size: 14px; color: #374151; padding: 0; font-weight: 500; margin-bottom: 20px; align-self: flex-start; }
      .back-btn:hover { color: #4a8f75; }
      .form-card { background: #fff; border-radius: 10px; padding: 36px; width: 100%; max-width: 560px; box-shadow: 0 1px 3px rgba(0,0,0,0.08); }
      .form-card h2 { font-size: 20px; font-weight: 700; color: #111827; text-align: center; margin-bottom: 4px; }
      .form-subtitle { font-size: 13px; color: #9ca3af; text-align: center; margin-bottom: 28px; }
      .form-group { margin-bottom: 16px; }
      .form-group label { display: block; font-size: 13px; font-weight: 500; color: #374151; margin-bottom: 6px; }
      .form-group select, .form-group input, .form-group textarea {
        width: 100%; padding: 10px 14px; border: 1px solid #e5e5e5; border-radius: 6px;
        font-size: 14px; color: #374151; background-color: #f9fafb; outline: none;
        font-family: inherit; transition: border-color 0.2s;
      }
      .form-group select:focus, .form-group input:focus, .form-group textarea:focus { border-color: #4a8f75; background-color: #fff; }
      .form-group select { appearance: none; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%239ca3af' d='M6 9L1 4h10z'/%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: right 14px center; }
      .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
      .form-actions { display: flex; gap: 12px; margin-top: 24px; }
      .cancel-btn { flex: 1; padding: 10px; background: #fff; border: 1px solid #d1d5db; border-radius: 6px; cursor: pointer; font-size: 14px; color: #ef4444; font-weight: 500; }
      .cancel-btn:hover { background: #fef2f2; }
      .save-btn { flex: 2; padding: 10px; background: #4a8f75; border: none; border-radius: 6px; cursor: pointer; font-size: 14px; color: #fff; font-weight: 600; }
      .save-btn:hover { background: #3a7560; }

      /* ── Toast ── */
      .toast {
        position: fixed; bottom: 28px; left: 50%; transform: translateX(-50%) translateY(80px);
        background: #111827; color: #fff; padding: 12px 24px; border-radius: 8px;
        font-size: 14px; font-weight: 500; z-index: 9999; opacity: 0; pointer-events: none;
        transition: transform 0.3s ease, opacity 0.3s ease;
      }
      .toast.show { transform: translateX(-50%) translateY(0); opacity: 1; }
      .toast.success { background: #059669; }
    </style>
  </head>
  <body>
    <div class="container">

      <!-- ── Sidebar ── -->
      <aside class="sidebar">
        <div class="logo"><span>Xana</span><span>Health</span></div>
        <nav class="nav-section">
          <div class="nav-label">RECEPTION/CASHIER</div>
          <a href="#" class="nav-item">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="3" width="7" height="7"></rect><rect x="14" y="3" width="7" height="7"></rect>
              <rect x="14" y="14" width="7" height="7"></rect><rect x="3" y="14" width="7" height="7"></rect>
            </svg>Dashboard
          </a>
          <a href="#" class="nav-item">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
              <polyline points="14 2 14 8 20 8"></polyline>
            </svg>New Patient File
          </a>
          <a href="patient_list.html" class="nav-item">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
              <polyline points="14 2 14 8 20 8"></polyline>
              <line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line>
              <polyline points="10 9 9 9 8 9"></polyline>
            </svg>Patients List
          </a>
          <a href="patient_visits.html" class="nav-item">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
              <circle cx="9" cy="7" r="4"></circle>
              <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
              <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
            </svg>Patient Visits
          </a>
          <a href="#" class="nav-item active" onclick="showList(event)">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
              <line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line>
              <line x1="3" y1="10" x2="21" y2="10"></line>
            </svg>Appointments
          </a>
          <a href="billing.html" class="nav-item">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect>
              <line x1="1" y1="10" x2="23" y2="10"></line>
            </svg>Billing
          </a>
        </nav>
        <div class="user-section">
          <div class="user-profile">
            <div class="user-avatar"></div>
            <div class="user-info"><h4>Jane Doe</h4><p>Receptionist</p></div>
          </div>
          <div class="user-actions">
            <a href="#" class="user-action">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10"></circle>
                <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                <line x1="12" y1="17" x2="12.01" y2="17"></line>
              </svg>Help
            </a>
            <a href="#" class="user-action">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                <polyline points="16 17 21 12 16 7"></polyline>
                <line x1="21" y1="12" x2="9" y2="12"></line>
              </svg>Logout
            </a>
          </div>
        </div>
      </aside>

      <!-- ── Main Content ── -->
      <main class="main-content">
        <header class="header">
          <h1 id="page-title">Appointments</h1>
          <div class="header-right">
            <svg class="notification-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
              <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
            </svg>
            <div class="company-dropdown">
              <span>Company Logo</span>
              <svg width="12" height="12" viewBox="0 0 12 12" fill="currentColor"><path d="M6 9L1 4h10z"></path></svg>
            </div>
          </div>
        </header>

        <!-- ══════════ VIEW 1: APPOINTMENTS LIST + CALENDAR ══════════ -->
        <div class="view active" id="view-list">
          <div class="content-area">

            <!-- Controls -->
            <div class="controls">
              <div class="controls-left">
                <button class="filter-btn">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="4" y1="21" x2="4" y2="14"></line><line x1="4" y1="10" x2="4" y2="3"></line>
                    <line x1="12" y1="21" x2="12" y2="12"></line><line x1="12" y1="8" x2="12" y2="3"></line>
                    <line x1="20" y1="21" x2="20" y2="16"></line><line x1="20" y1="12" x2="20" y2="3"></line>
                    <line x1="1" y1="14" x2="7" y2="14"></line><line x1="9" y1="8" x2="15" y2="8"></line>
                    <line x1="17" y1="16" x2="23" y2="16"></line>
                  </svg>Filter by
                </button>
                <div class="search-box">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.35-4.35"></path>
                  </svg>
                  <input type="text" placeholder="Search appointments" />
                </div>
                <button class="action-btn">
                  Action
                  <svg width="12" height="12" viewBox="0 0 12 12" fill="currentColor"><path d="M6 9L1 4h10z"></path></svg>
                </button>
              </div>
              <div class="controls-right">
                <button class="export-btn">Export to Excel</button>
                <!-- ✅ FIXED: onclick now calls showNewAppointment() -->
                <button class="add-patient-btn" onclick="showNewAppointment(event)">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="12" y1="5" x2="12" y2="19"></line>
                    <line x1="5" y1="12" x2="19" y2="12"></line>
                  </svg>New Appointment
                </button>
              </div>
            </div>

            <!-- Applied Filters -->
            <div class="applied-filters">
              <span class="filter-label">Applied Filter</span>
              <div class="filter-tag">Recently added <span class="close">✕</span></div>
              <div class="filter-tag">Recently Updated <span class="close">✕</span></div>
              <span class="clear-filter">Clear filter</span>
            </div>

            <!-- Table -->
            <div class="table-container">
              <table>
                <thead>
                  <tr>
                    <th><input type="checkbox" class="checkbox" /></th>
                    <th>Image</th>
                    <th>Patient</th>
                    <th>Gender</th>
                    <th>Department</th>
                    <th>Doctor</th>
                    <th>Phone Number</th>
                    <th>Email</th>
                    <th>Date &amp; Time</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="appt-tbody">
                  <!-- Rows injected by JS -->
                </tbody>
              </table>
              <div class="pagination">
                <button class="page-btn" disabled>Previous</button>
                <button class="page-btn active">1</button>
                <button class="page-btn">2</button>
                <button class="page-btn">3</button>
                <button class="page-btn">Next</button>
                <span class="page-info">1/03</span>
              </div>
            </div>

            <!-- Calendar -->
            <div class="calendar-header">
              <button class="nav-button" id="prevBtn">← Previous</button>
              <h2 class="current-month" id="currentMonth">November 2023</h2>
              <button class="nav-button" id="nextBtn">Next →</button>
            </div>
            <div class="calendar-container">
              <div class="calendar-grid" id="calendarGrid">
                <div class="day-header">Monday</div>
                <div class="day-header">Tuesday</div>
                <div class="day-header">Wednesday</div>
                <div class="day-header">Thursday</div>
                <div class="day-header">Friday</div>
                <div class="day-header">Saturday</div>
                <div class="day-header">Sunday</div>
                <!-- Week 1 -->
                <div class="calendar-day other-month"><div class="day-date">30/10/2023</div></div>
                <div class="calendar-day other-month"><div class="day-date">31/10/2023</div></div>
                <div class="calendar-day"><div class="day-date">01/11/2023</div></div>
                <div class="calendar-day"><div class="day-date">02/11/2023</div></div>
                <div class="calendar-day"><div class="day-date">03/11/2023</div></div>
                <div class="calendar-day"><div class="day-date">04/11/2023</div></div>
                <div class="calendar-day"><div class="day-date">05/11/2023</div></div>
                <!-- Week 2 -->
                <div class="calendar-day"><div class="day-date">06/11/2023</div></div>
                <div class="calendar-day"><div class="day-date">07/11/2023</div></div>
                <div class="calendar-day"><div class="day-date">08/11/2023</div></div>
                <div class="calendar-day"><div class="day-date">09/11/2023</div></div>
                <div class="calendar-day"><div class="day-date">10/11/2023</div></div>
                <div class="calendar-day"><div class="day-date">11/11/2023</div></div>
                <div class="calendar-day"><div class="day-date">12/11/2023</div></div>
                <!-- Week 3 -->
                <div class="calendar-day"><div class="day-date">13/11/2023</div></div>
                <div class="calendar-day"><div class="day-date">14/11/2023</div></div>
                <div class="calendar-day"><div class="day-date">15/11/2023</div></div>
                <div class="calendar-day"><div class="day-date">16/11/2023</div></div>
                <div class="calendar-day"><div class="day-date">17/11/2023</div></div>
                <div class="calendar-day"><div class="day-date">18/11/2023</div></div>
                <div class="calendar-day"><div class="day-date">19/11/2023</div></div>
                <!-- Week 4 -->
                <div class="calendar-day selected"><div class="day-date">20/11/2023</div></div>
                <div class="calendar-day"><div class="day-date">21/11/2023</div></div>
                <div class="calendar-day"><div class="day-date">22/11/2023</div></div>
                <div class="calendar-day"><div class="day-date">23/11/2023</div></div>
                <div class="calendar-day"><div class="day-date">24/11/2023</div></div>
                <div class="calendar-day"><div class="day-date">25/11/2023</div></div>
                <div class="calendar-day"><div class="day-date">26/11/2023</div></div>
                <!-- Week 5 -->
                <div class="calendar-day"><div class="day-date">27/11/2023</div></div>
                <div class="calendar-day"><div class="day-date">28/11/2023</div></div>
                <div class="calendar-day"><div class="day-date">29/11/2023</div></div>
                <div class="calendar-day"><div class="day-date">30/11/2023</div></div>
                <div class="calendar-day other-month"><div class="day-date">01/12/2023</div></div>
                <div class="calendar-day other-month"><div class="day-date">02/12/2023</div></div>
                <div class="calendar-day other-month"><div class="day-date">03/12/2023</div></div>
              </div>
            </div>

          </div>
        </div>

        <!-- ══════════ VIEW 2: NEW APPOINTMENT FORM ══════════ -->
        <div class="view" id="view-new-appointment">
          <div class="form-view-area">
            <button class="back-btn" onclick="showList(event)">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline>
              </svg>Back
            </button>
            <div class="form-card">
              <h2>New Appointment</h2>
              <p class="form-subtitle">Fill in the appointment details below</p>

              <div class="form-row">
                <div class="form-group">
                  <label>Patient First Name</label>
                  <input type="text" placeholder="Enter first name" />
                </div>
                <div class="form-group">
                  <label>Patient Last Name</label>
                  <input type="text" placeholder="Enter last name" />
                </div>
              </div>

              <div class="form-row">
                <div class="form-group">
                  <label>Gender</label>
                  <select>
                    <option value="">Select gender</option>
                    <option>Male</option>
                    <option>Female</option>
                    <option>Other</option>
                  </select>
                </div>
                <div class="form-group">
                  <label>Phone Number</label>
                  <input type="tel" placeholder="+250 000 000 000" />
                </div>
              </div>

              <div class="form-group">
                <label>Email</label>
                <input type="email" placeholder="Enter email address" />
              </div>

              <div class="form-group">
                <label>Department</label>
                <select>
                  <option value="">Select a department</option>
                  <option>General Medicine</option>
                  <option>Pediatrics</option>
                  <option>Cardiology</option>
                  <option>Neurology</option>
                  <option>Orthopedics</option>
                  <option>Dermatology</option>
                </select>
              </div>

              <div class="form-group">
                <label>Preferred Doctor (optional)</label>
                <select>
                  <option value="">Select doctor</option>
                  <option>Dr. Jacob Ryan</option>
                  <option>Dr. Sara Smith</option>
                  <option>Dr. Amina Otieno</option>
                  <option>Dr. Chen Wei</option>
                </select>
              </div>

              <div class="form-row">
                <div class="form-group">
                  <label>Appointment Date</label>
                  <input type="date" />
                </div>
                <div class="form-group">
                  <label>Appointment Time</label>
                  <input type="time" />
                </div>
              </div>

              <div class="form-group">
                <label>Reason for Visit</label>
                <textarea placeholder="Brief description of the reason for this appointment..." style="min-height:80px;resize:vertical;"></textarea>
              </div>

              <div class="form-group">
                <label>Insurance</label>
                <select>
                  <option value="">Select insurance</option>
                  <option>RSSB</option>
                  <option>MMI</option>
                  <option>RADIANT</option>
                  <option>Private / No Insurance</option>
                </select>
              </div>

              <div class="form-actions">
                <button class="cancel-btn" onclick="showList(event)">Cancel</button>
                <button class="save-btn">Save Appointment</button>
              </div>
            </div>
          </div>
        </div>

        <!-- ══════════ VIEW 3: EDIT APPOINTMENT FORM ══════════ -->
        <div class="view" id="view-edit-appointment">
          <div class="form-view-area">
            <button class="back-btn" onclick="showList(event)">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline>
              </svg>Back
            </button>
            <div class="form-card">
              <h2>Edit Appointment</h2>
              <p class="form-subtitle">Update the appointment details</p>

              <div class="form-row">
                <div class="form-group">
                  <label>Patient First Name</label>
                  <input type="text" id="edit-firstName" placeholder="First name" />
                </div>
                <div class="form-group">
                  <label>Patient Last Name</label>
                  <input type="text" id="edit-lastName" placeholder="Last name" />
                </div>
              </div>

              <div class="form-row">
                <div class="form-group">
                  <label>Gender</label>
                  <select id="edit-gender">
                    <option value="">Select gender</option>
                    <option value="Male">Male</option>
                    <option value="Female">Female</option>
                    <option value="Other">Other</option>
                  </select>
                </div>
                <div class="form-group">
                  <label>Phone Number</label>
                  <input type="tel" id="edit-phone" placeholder="+250 000 000 000" />
                </div>
              </div>

              <div class="form-group">
                <label>Email</label>
                <input type="email" id="edit-email" placeholder="Email address" />
              </div>

              <div class="form-group">
                <label>Department</label>
                <select id="edit-department">
                  <option value="">Select a department</option>
                  <option value="General Medicine">General Medicine</option>
                  <option value="Pediatrics">Pediatrics</option>
                  <option value="Cardiology">Cardiology</option>
                  <option value="Neurology">Neurology</option>
                  <option value="Orthopedics">Orthopedics</option>
                  <option value="Dermatology">Dermatology</option>
                </select>
              </div>

              <div class="form-group">
                <label>Doctor</label>
                <select id="edit-doctor">
                  <option value="">Select doctor</option>
                  <option value="Dr. Jacob Ryan">Dr. Jacob Ryan</option>
                  <option value="Dr. Sara Smith">Dr. Sara Smith</option>
                  <option value="Dr. Amina Otieno">Dr. Amina Otieno</option>
                  <option value="Dr. Chen Wei">Dr. Chen Wei</option>
                </select>
              </div>

              <div class="form-row">
                <div class="form-group">
                  <label>Appointment Date</label>
                  <input type="date" id="edit-date" />
                </div>
                <div class="form-group">
                  <label>Appointment Time</label>
                  <input type="time" id="edit-time" />
                </div>
              </div>

              <div class="form-group">
                <label>Reason for Visit</label>
                <textarea id="edit-reason" placeholder="Reason for appointment..." style="min-height:80px;resize:vertical;"></textarea>
              </div>

              <div class="form-group">
                <label>Insurance</label>
                <select id="edit-insurance">
                  <option value="">Select insurance</option>
                  <option value="RSSB">RSSB</option>
                  <option value="MMI">MMI</option>
                  <option value="RADIANT">RADIANT</option>
                  <option value="Private / No Insurance">Private / No Insurance</option>
                </select>
              </div>

              <div class="form-actions">
                <button class="cancel-btn" onclick="showList(event)">Cancel</button>
                <button class="save-btn" onclick="saveEdit(event)">Save Changes</button>
              </div>
            </div>
          </div>
        </div>

      </main>
    </div>

    <!-- Toast -->
    <div class="toast" id="toast"></div>

    <script>
      // ── Appointment data ──
      const appointments = [
        { id: 1, img: 'https://i.pravatar.cc/150?img=1',  firstName: 'Raekwon', lastName: 'Gbeho',    gender: 'Female', department: 'Neurology',       doctor: 'Dr. Sara Smith',   phone: '+250000000000', email: 'raekwon@gmail.com', date: '2025-05-23', time: '09:00', reason: '', insurance: 'RSSB' },
        { id: 2, img: 'https://i.pravatar.cc/150?img=5',  firstName: 'Milani',  lastName: 'Mostafa',   gender: 'Female', department: 'Cardiology',       doctor: 'Dr. Jacob Ryan',   phone: '+250000000000', email: 'milani@gmail.com',  date: '2025-05-24', time: '11:30', reason: '', insurance: 'MMI' },
        { id: 3, img: 'https://i.pravatar.cc/150?img=9',  firstName: 'Tawana',  lastName: 'Adébáyò',   gender: 'Female', department: 'Pediatrics',        doctor: 'Dr. Amina Otieno', phone: '+250000000000', email: 'tawana@gmail.com',  date: '2025-05-25', time: '14:00', reason: '', insurance: 'RADIANT' },
      ];

      let currentAppt = null;

      // ── Build table from data ──
      function buildTable() {
        const tbody = document.getElementById('appt-tbody');
        tbody.innerHTML = appointments.map(a => {
          const displayDate = formatDate(a.date) + ' ' + a.time;
          return `
            <tr>
              <td onclick="event.stopPropagation()"><input type="checkbox" class="checkbox" /></td>
              <td><img src="${a.img}" alt="Patient" class="patient-image" /></td>
              <td>${a.firstName} ${a.lastName}</td>
              <td>${a.gender}</td>
              <td>${a.department}</td>
              <td>${a.doctor}</td>
              <td>${a.phone}</td>
              <td>${a.email}</td>
              <td>${displayDate}</td>
              <td>
                <div class="action-icons">
                  <svg class="action-icon" title="Edit" onclick="openEdit(event, ${a.id})" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                    <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                  </svg>
                  <svg class="action-icon" title="View" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                    <circle cx="12" cy="12" r="3"></circle>
                  </svg>
                </div>
              </td>
            </tr>`;
        }).join('');
      }

      function formatDate(isoDate) {
        if (!isoDate) return '';
        const [y, m, d] = isoDate.split('-');
        return `${d}/${m}/${y}`;
      }

      // ── View switching ──
      function setView(viewId, title) {
        document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
        document.getElementById(viewId).classList.add('active');
        document.getElementById('page-title').textContent = title;
        document.getElementById(viewId).scrollTop = 0;
      }

      function showList(e) {
        if (e) e.preventDefault();
        setView('view-list', 'Appointments');
      }

      function showNewAppointment(e) {
        if (e) e.preventDefault();
        setView('view-new-appointment', 'New Appointment');
      }

      // ── Edit: open & pre-fill ──
      function openEdit(e, id) {
        e.stopPropagation();
        const a = appointments.find(x => x.id === id);
        if (!a) return;
        currentAppt = a;

        document.getElementById('edit-firstName').value  = a.firstName;
        document.getElementById('edit-lastName').value   = a.lastName;
        document.getElementById('edit-gender').value     = a.gender;
        document.getElementById('edit-phone').value      = a.phone;
        document.getElementById('edit-email').value      = a.email;
        document.getElementById('edit-department').value = a.department;
        document.getElementById('edit-doctor').value     = a.doctor;
        document.getElementById('edit-date').value       = a.date;
        document.getElementById('edit-time').value       = a.time;
        document.getElementById('edit-reason').value     = a.reason;
        document.getElementById('edit-insurance').value  = a.insurance;

        setView('view-edit-appointment', 'Edit Appointment');
      }

      // ── Edit: save ──
      function saveEdit(e) {
        if (e) e.preventDefault();
        if (!currentAppt) return;

        const firstName = document.getElementById('edit-firstName').value.trim();
        if (!firstName) { showToast('First name is required.', false); return; }

        currentAppt.firstName  = firstName;
        currentAppt.lastName   = document.getElementById('edit-lastName').value.trim();
        currentAppt.gender     = document.getElementById('edit-gender').value;
        currentAppt.phone      = document.getElementById('edit-phone').value.trim();
        currentAppt.email      = document.getElementById('edit-email').value.trim();
        currentAppt.department = document.getElementById('edit-department').value;
        currentAppt.doctor     = document.getElementById('edit-doctor').value;
        currentAppt.date       = document.getElementById('edit-date').value;
        currentAppt.time       = document.getElementById('edit-time').value;
        currentAppt.reason     = document.getElementById('edit-reason').value.trim();
        currentAppt.insurance  = document.getElementById('edit-insurance').value;

        buildTable();
        showToast('Appointment updated successfully!', true);
        setTimeout(() => showList(null), 1200);
      }

      // ── Toast ──
      function showToast(msg, success = true) {
        const t = document.getElementById('toast');
        t.textContent = msg;
        t.className = 'toast' + (success ? ' success' : '');
        t.offsetHeight; // force reflow
        t.classList.add('show');
        setTimeout(() => t.classList.remove('show'), 2800);
      }

      // ── Calendar navigation ──
      const prevBtn = document.getElementById('prevBtn');
      const nextBtn = document.getElementById('nextBtn');
      const currentMonthEl = document.getElementById('currentMonth');
      const monthNames = ['January','February','March','April','May','June','July','August','September','October','November','December'];
      let currentDate = new Date(2023, 10, 1);

      function updateCalendarHeader() {
        currentMonthEl.textContent = `${monthNames[currentDate.getMonth()]} ${currentDate.getFullYear()}`;
      }

      prevBtn.addEventListener('click', () => { currentDate.setMonth(currentDate.getMonth() - 1); updateCalendarHeader(); });
      nextBtn.addEventListener('click', () => { currentDate.setMonth(currentDate.getMonth() + 1); updateCalendarHeader(); });

      // ── Calendar day selection ──
      document.querySelectorAll('.calendar-day:not(.other-month)').forEach(day => {
        day.addEventListener('click', function () {
          document.querySelectorAll('.calendar-day.selected').forEach(d => d.classList.remove('selected'));
          this.classList.add('selected');
        });
      });

      // ── Init ──
      buildTable();
    </script>
  </body>
</html>